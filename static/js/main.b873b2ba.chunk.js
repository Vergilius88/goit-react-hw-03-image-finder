(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(3),r=a.n(o),c=a(10),s=a(4),i=a(5),l=a(7),u=a(6),d=a(8),h=(a(16),a(11)),m=a.n(h),p=(a(37),a(38),a(39),a(1)),b=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={keyword:""},e.handleKeywordChange=function(t){e.setState({keyword:t.currentTarget.value.toLowerCase()})},e.handleSubmit=function(t){if(t.preventDefault(),""===e.state.keyword.trim())return d.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});e.props.formSubmit(e.state.keyword),e.setState({keyword:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsx)("header",{className:"SearchBar",children:Object(p.jsxs)("form",{onSubmit:this.handleSubmit,className:"SearchForm",children:[Object(p.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(p.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(p.jsx)("input",{className:"SearchForm-input",type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos",onChange:this.handleKeywordChange,value:this.state.keyword})]})})}}]),a}(n.Component),j=(a(41),a(42),function(e){var t=e.item,a=e.openModal;return Object(p.jsx)("li",{className:"ImageGalleryItem",onClick:a,children:Object(p.jsx)("img",{src:t.webformatURL,alt:t.tags,className:"ImageGalleryItem-image","data-modalImage":t.largeImageURL})},t.id)}),g=function(e){var t=e.items,a=e.openModal;return Object(p.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(p.jsx)(j,{item:e,openModal:a})}))})},f=(a(43),function(e){var t=e.handleButtonClick;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more...."})})}),y=(a(44),document.querySelector("#modal-root")),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={},e.handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.imgAttribute;return Object(o.createPortal)(Object(p.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(p.jsx)("div",{className:"Modal",children:Object(p.jsx)("img",{src:e.src,alt:e.alt})})}),y)}}]),a}(n.Component),v=function(e,t){return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("18814496-71c3543716fd26683f05f95a8","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){if(e.ok)return e.json()}))},w=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={keyword:"",page:1,galleryItems:null,status:"idle",showModal:!1,imgAttribute:!1,error:null},e.handleFormSubmission=function(t){e.setState({keyword:t}),e.setState({page:1})},e.handleButtonClick=function(){e.setState({page:e.state.page+1})},e.handleOpenModal=function(t){if(!1===e.state.showModal){var a=t.target.dataset.modalimage,n=t.target.alt;e.setState({imgAttribute:{src:a,alt:n}})}e.setState((function(e){return{showModal:!e.showModal}}))},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=t.keyword,o=this.state.keyword,r=t.page,s=this.state.page;n!==o&&(this.setState({status:"pending"}),v(o,s).then((function(e){if(0===e.hits.length)throw new Error("\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(o," \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"));a.setState({galleryItems:e.hits,status:"resolved"})})).catch((function(e){console.dir(e),a.setState({error:e.message,status:"reject"})}))),r!==s&&v(o,s).then((function(e){return a.setState({galleryItems:[].concat(Object(c.a)(a.state.galleryItems),Object(c.a)(e.hits)),status:"resolved"})})),window.scrollBy({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.galleryItems,a=e.error,n=e.status,o=e.showModal,r=e.imgAttribute;return Object(p.jsxs)("div",{className:"App",children:[o&&Object(p.jsx)(O,{onClose:this.handleOpenModal,imgAttribute:r}),Object(p.jsx)(b,{formSubmit:this.handleFormSubmission}),"reject"===n&&Object(p.jsx)("h1",{children:a}),"resolved"===n&&Object(p.jsx)(g,{items:t,openModal:this.handleOpenModal}),"pending"===n&&Object(p.jsx)(m.a,{type:"Grid",color:"#00BFFF",height:80,width:80}),"resolved"===n&&Object(p.jsx)(f,{handleButtonClick:this.handleButtonClick}),Object(p.jsx)(d.a,{})]})}}]),a}(n.Component);r.a.render(Object(p.jsx)(w,{}),document.querySelector("#root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.b873b2ba.chunk.js.map