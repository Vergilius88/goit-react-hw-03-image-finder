{"version":3,"sources":["components/searchBar/searchBar.jsx","components/imageGalleryItem/imageGalleryItem.jsx","components/imageGallery/imageGallery.jsx","components/button/button.jsx","components/modal/modal.jsx","services/galleryAPI.js","components/App.jsx","index.js"],"names":["SearchBar","state","keyword","handleKeywordChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","props","formSubmit","className","onSubmit","this","type","autocomplete","autofocus","placeholder","onChange","Component","ImageGalleryItem","item","openModal","onClick","src","webformatURL","alt","tags","data-modalImage","largeImageURL","id","ImageGallery","items","map","Button","handleButtonClick","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","imgAttribute","createPortal","fetchGallery","page","fetch","then","response","ok","json","App","galleryItems","status","showModal","handleFormSubmission","handleOpenModal","selectedSrc","dataset","modalimage","selectedAlt","_prevProps","prevState","prevKeyword","nextKeyword","prevPage","galleryArray","hits","length","Error","catch","console","dir","message","scrollBy","top","documentElement","scrollHeight","behavior","color","height","width","ReactDOM","render"],"mappings":"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","file":"static/js/main.b873b2ba.chunk.js","sourcesContent":["import { Component } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"./searchBar.css\";\r\n\r\nexport default class SearchBar extends Component {\r\n  state = {\r\n    keyword: \"\",\r\n  };\r\n\r\n  handleKeywordChange = (event) => {\r\n    this.setState({ keyword: event.currentTarget.value.toLowerCase() });\r\n  };\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (this.state.keyword.trim() === \"\") {\r\n      return toast.error(\"Введите слово для поиска!\", {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n      });\r\n    }\r\n    this.props.formSubmit(this.state.keyword);\r\n    this.setState({ keyword: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"SearchBar\">\r\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autocomplete=\"off\"\r\n            autofocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleKeywordChange}\r\n            value={this.state.keyword}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import \"./importGalleryItem.css\";\r\n\r\nconst ImageGalleryItem = ({ item, openModal }) => {\r\n  return (\r\n    <li key={item.id} className=\"ImageGalleryItem\" onClick={openModal}>\r\n      <img\r\n        src={item.webformatURL}\r\n        alt={item.tags}\r\n        className=\"ImageGalleryItem-image\"\r\n        data-modalImage={item.largeImageURL}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import \"./imageGallery.css\";\r\nimport ImageGalleryItem from \"../imageGalleryItem/imageGalleryItem\";\r\n\r\nconst ImageGallery = ({ items, openModal }) => {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {items.map((item) => (\r\n        <ImageGalleryItem item={item} openModal={openModal} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;\r\n","import \"./button.css\";\r\n\r\nconst Button = ({ handleButtonClick }) => {\r\n  return (\r\n    <>\r\n      <button type=\"button\" className=\"Button\" onClick={handleButtonClick}>\r\n        Load more....\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import { Component } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport \"./modal.css\";\r\nconst modalRoot = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  state = {};\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n  }\r\n  handleKeyDown = (event) => {\r\n    if (event.code === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n  handleBackdropClick = (event) => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const imgAttribute = this.props.imgAttribute;\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">\r\n          <img src={imgAttribute.src} alt={imgAttribute.alt} />\r\n        </div>\r\n      </div>,\r\n      modalRoot\r\n    );\r\n  }\r\n}\r\n","const fetchGallery = (keyword, page) => {\r\n  const key = \"18814496-71c3543716fd26683f05f95a8\";\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${keyword}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=12`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n  });\r\n};\r\n\r\nexport default fetchGallery;\r\n","import { Component } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Loader from \"react-loader-spinner\";\n\nimport \"./app.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n\nimport SearchBar from \"./searchBar/searchBar\";\nimport ImageGallery from \"./imageGallery/imageGallery\";\nimport Button from \"./button/button\";\nimport Modal from \"./modal/modal\";\nimport fetchGallery from \"../services/galleryAPI\";\n\nexport default class App extends Component {\n  state = {\n    keyword: \"\",\n    page: 1,\n    galleryItems: null,\n    status: \"idle\",\n    showModal: false,\n    imgAttribute: false,\n    error: null,\n  };\n\n  componentDidUpdate(_prevProps, prevState) {\n    const prevKeyword = prevState.keyword;\n    const nextKeyword = this.state.keyword;\n    const prevPage = prevState.page;\n    const page = this.state.page;\n\n    if (prevKeyword !== nextKeyword) {\n      this.setState({ status: \"pending\" });\n\n      fetchGallery(nextKeyword, page)\n        .then((galleryArray) => {\n          if (galleryArray.hits.length === 0) {\n            throw new Error(`По запросу ${nextKeyword} ничего не найдено`);\n          }\n          this.setState({\n            galleryItems: galleryArray.hits,\n            status: \"resolved\",\n          });\n        })\n        .catch((error) => {\n          console.dir(error);\n          this.setState({ error: error.message, status: \"reject\" });\n        });\n    }\n    if (prevPage !== page) {\n      fetchGallery(nextKeyword, page).then((galleryArray) =>\n        this.setState({\n          galleryItems: [...this.state.galleryItems, ...galleryArray.hits],\n          status: \"resolved\",\n        })\n      );\n    }\n    window.scrollBy({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  handleFormSubmission = (keyword) => {\n    this.setState({ keyword: keyword });\n    this.setState({ page: 1 });\n  };\n  handleButtonClick = () => {\n    this.setState({ page: this.state.page + 1 });\n  };\n  handleOpenModal = (event) => {\n    if (this.state.showModal === false) {\n      const selectedSrc = event.target.dataset.modalimage;\n      const selectedAlt = event.target.alt;\n      this.setState({\n        imgAttribute: { src: selectedSrc, alt: selectedAlt },\n      });\n    }\n\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { galleryItems, error, status, showModal, imgAttribute } = this.state;\n    return (\n      <div className=\"App\">\n        {showModal && (\n          <Modal onClose={this.handleOpenModal} imgAttribute={imgAttribute} />\n        )}\n        <SearchBar formSubmit={this.handleFormSubmission} />\n        {status === \"reject\" && <h1>{error}</h1>}\n        {status === \"resolved\" && (\n          <ImageGallery items={galleryItems} openModal={this.handleOpenModal} />\n        )}\n        {status === \"pending\" && (\n          <Loader type=\"Grid\" color=\"#00BFFF\" height={80} width={80} />\n        )}\n        {status === \"resolved\" && (\n          <Button handleButtonClick={this.handleButtonClick} />\n        )}\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./components/App\";\n\nReactDOM.render(<App />, document.querySelector(\"#root\"));\n"],"sourceRoot":""}